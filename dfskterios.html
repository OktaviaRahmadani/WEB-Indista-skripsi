<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Detail Mobil</title>
  <link rel="stylesheet" href="detailmobil.css" />
</head>

<body>
   <div id="navbar"></div>

  <script>
    fetch('navbar.html')
      .then(res => res.text())
      .then(data => {
        document.getElementById('navbar').innerHTML = data;
      });
  </script>


  <div class="container">
    <img src="images/dfsk.png" alt="Mobil" class="main-image" id="mainImage" />
    <div class="thumbnail">
      <img src="images/dfsk.png" onclick="gantiGambar(this)" />
      <img src="images/dfsk2.png" onclick="gantiGambar(this)" />
    </div>

    <div class="car-title">DSFK G560 1.5 CVT TURBO - TERIOS </div>
    <div class="car-price">Rp. 400.000</div>

    <div class="car-specs">
      <div><img src="images/icon-year.png" height="24"/><div>2019</div></div>
      <div><img src="images/icon-fuel.png" height="24"/><div>Bensin Turbo</div></div>
      <div><img src="images/icon-color.png" height="24"/><div>Merah</div></div>
      <div><img src="images/icon-transmission.png" height="24"/><div>CVT</div></div>
    </div>

    <div class="frame-box">
      <div>
        <h3>Termasuk</h3>
        <ul>
          <li>Sewa mobil full day</li>
          <li>Penjemputan & pengantaran sesuai zona layanan</li>
          <li>Biaya pajak (PPN)</li>
        </ul>
      </div>
      <div>
        <h3>Tidak Termasuk</h3>
        <ul>
          <li>Bahan bakar</li>
          <li>Biaya tol & parkir</li>
          <li>Asuransi pribadi</li>
          <li>Biaya overtime</li>
        </ul>
      </div>
    </div>

    <div class="syarat-sewa">
      <h4>Syarat Sewa:</h4>
      <ul>
        <li>Usia minimal penyewa/pengemudi adalah 21 tahun</li>
        <li>Memiliki SIM A aktif</li>
        <li>Menunjukkan kartu identitas</li>
        <li>Bersedia mematuhi ketentuan penyedia layanan</li>
        <li>Menyediakan dokumen pendukung</li>
        <li>Pembatalan H-1 dikenakan potongan 50%</li>
        <li>Keterlambatan lebih dari 1 jam dikenakan biaya tambahan</li>
        <li>Mobil tidak untuk komersial tanpa izin</li>
        <li>Penyewa bertanggung jawab atas kerusakan</li>
      </ul>
    </div>

        <div class="form-section">
            <h3>Lokasi Penjemputan</h3>
            <label class="radio-label">
                <input type="radio" name="lokasi" checked>Kantor Rental
            </label>
            <label class="radio-label">
              <img src="images/location-icon.png" class="icon-img">Alexandria Purple Cimanggis Depok West Java
            </label>
            <label class="radio-label">
                <input type="radio" name="lokasi" id="lainnya">Lokasi Lain
            </label>
            <input type="text" class="input-lokasi" id="inputLokasi" placeholder="Masukkan lokasi penjemputan">
        </div>

        <div class="form-section">
            <h3>Lokasi Pengambilan</h3>
            <label class="radio-label">
                <input type="radio" name="ambil" checked>Kantor Rental
            </label>
            <label class="radio-label">
                <input type="radio" name="ambil" id="ambilLain">Lokasi Lain
            </label>
            <input type="text" class="input-lokasi" id="inputAmbil" placeholder="Masukkan lokasi pengambilan">
        </div>

        <div class="form-section">
            <h3>Lokasi Rental</h3>
            <p>
                <img src="images/location-icon.png" class="icon-img" alt="Location Icon"/> 
                Jl. TMII, Ceger, Jakarta Timur
            </p>

            <!-- Google Maps Embed -->
            <iframe 
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3965.7080495610294!2d106.88731747406217!3d-6.302038593687107!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69ed50d076a261%3A0x73127b9ecf2da0c!2sTaman%20Mini%20Indonesia%20Indah!5e0!3m2!1sid!2sid!4v1751002905626!5m2!1sid!2sid" 
                width="100%" 
                height="300" 
                style="border:0; border-radius:8px;" 
                allowfullscreen="" 
                loading="lazy" 
                referrerpolicy="no-referrer-when-downgrade">
            </iframe>
        </div>

        <div class="total-harga">
            <span>Total Harga</span>
            <span id="totalHarga">Rp. 450.000</span> <!-- Total Harga -->
        </div>

        <div class="keterangan">
            <span id="keteranganHarga">Harga akan bertambah jika memilih Lokasi Lain.</span> <!-- Keterangan Tambahan -->
        </div>

        <button class="button-red" onclick="showModal()">Lanjut</button>
    </div>
<div id="loginModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      
      <div class="lock-icon">
        <div class="lock-shackle"></div>
        <div class="lock-body">
          <div class="lock-keyhole"></div>
        </div>
      </div>
      
      <div class="modal-text">
        Silakan login terlebih dahulu untuk melanjutkan proses booking sewa kendaraan Anda
      </div>
      
      <div class="modal-buttons">
        <button class="modal-btn login-btn" onclick="handleLogin()">Login Sekarang</button>
        <button class="modal-btn register-btn" onclick="handleRegister()">Daftar Sekarang</button>
      </div>
    </div>
  </div>
  
    <script>
      // Mendeklarasikan semua elemen yang diperlukan hanya sekali
const lokasiRadio = document.querySelectorAll('input[name="lokasi"]');
const ambilRadio = document.querySelectorAll('input[name="ambil"]');
const inputLokasi = document.getElementById('inputLokasi');
const inputAmbil = document.getElementById('inputAmbil');
const totalHargaElem = document.getElementById('totalHarga');
const keteranganHargaElem = document.getElementById('keteranganHarga');

let basePrice = 450000; // Harga dasar mobil
let totalHarga = basePrice;

// Fungsi untuk memperbarui total harga
function updateTotalHarga() {
    let additionalCost = 0;

    // Menambahkan biaya lokasi penjemputan jika "Lokasi Lain" dipilih
    if (document.getElementById('lainnya').checked) {
      additionalCost += 100000; // Menambahkan Rp. 100.000 untuk lokasi lain penjemputan
    }

    // Menambahkan biaya lokasi pengambilan jika "Lokasi Lain" dipilih
    if (document.getElementById('ambilLain').checked) {
      additionalCost += 100000; // Menambahkan Rp. 100.000 untuk lokasi lain pengambilan
    }

    // Menghitung total harga
    totalHarga = basePrice + additionalCost;
    totalHargaElem.textContent = `Rp. ${totalHarga.toLocaleString()}`; // Menampilkan total harga

    // Menampilkan keterangan jika ada tambahan biaya
    if (additionalCost > 0) {
      keteranganHargaElem.textContent = `Harga akan bertambah jika memilih Lokasi Lain. Total tambahan: Rp. ${additionalCost.toLocaleString()}`;
    } else {
      keteranganHargaElem.textContent = `Harga akan bertambah jika memilih Lokasi Lain.`;
    }
}

// Menambahkan event listener untuk memilih lokasi penjemputan
lokasiRadio.forEach(radio => {
    radio.addEventListener('change', () => {
        // Menampilkan atau menyembunyikan input lokasi penjemputan
        inputLokasi.style.display = document.getElementById('lainnya').checked ? 'block' : 'none';
        updateTotalHarga(); // Memperbarui harga total saat pilihan berubah
    });
});

// Menambahkan event listener untuk memilih lokasi pengambilan
ambilRadio.forEach(r => {
    r.addEventListener('change', () => {
        // Menampilkan atau menyembunyikan input lokasi pengambilan
        inputAmbil.style.display = document.getElementById('ambilLain').checked ? 'block' : 'none';
        updateTotalHarga(); // Memperbarui harga total saat pilihan berubah
    });
});

// Inisialisasi harga total saat halaman pertama kali dimuat
updateTotalHarga();


    </script> 
    
    <script>
      function gantiGambar(elemen) {
    // Mengambil src dari gambar thumbnail yang diklik
    const gambarBaru = elemen.src;
    
    // Mengubah src gambar utama sesuai dengan gambar thumbnail yang diklik
    document.getElementById('mainImage').src = gambarBaru;
}
    </script>

      <script>
      document.getElementById('btnLanjut').addEventListener('click', function() {
    // Mengarahkan pengguna ke halaman booking.html
    window.location.href = "booking.html";
});
    </script>

    <script>
       // Fungsi modal
    function showModal() {
      document.getElementById('loginModal').style.display = 'block';
    }

    function closeModal() {
      document.getElementById('loginModal').style.display = 'none';
    }

    function handleLogin() {
      window.location.href = "login.html";
    }

    function handleRegister() {
      window.location.href = "register.html";
    }


    // Close modal when clicking outside
    window.onclick = function(event) {
      const modal = document.getElementById('loginModal');
      if (event.target === modal) {
        closeModal();
      }
    }

    // Inisialisasi
    updateTotalHarga();
  </script>

   <script src="navbar.js"></script> 

   <script>
  // Fungsi untuk mengecek status login
  function checkLoginStatus() {
    const isLoggedIn = localStorage.getItem('isLoggedIn');
    return isLoggedIn === 'true';
  }

  // Fungsi untuk update navbar berdasarkan status login
  function updateNavbar() {
    const isLoggedIn = checkLoginStatus();
    
    // Cari tombol login di navbar
    const loginBtn = document.querySelector('.login-button, .btn-login, [onclick="goToLogin()"]');
    
    if (isLoggedIn && loginBtn) {
      // Ganti tombol login dengan profil
      loginBtn.innerHTML = `
        <div class="profile-dropdown">
          <button class="profile-btn" onclick="toggleProfile()">
            <img src="images/profile-icon.png" alt="Profile" style="width: 20px; height: 20px; border-radius: 50%; margin-right: 5px;">
            Profil
          </button>
          <div class="profile-menu" id="profileMenu" style="display: none; position: absolute; background: white; border: 1px solid #ddd; border-radius: 5px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); min-width: 150px; z-index: 1000; margin-top: 5px;">
            <a href="profil.html" style="display: block; padding: 10px 15px; text-decoration: none; color: #333;">Lihat Profil</a>
            <a href="pengaturan.html" style="display: block; padding: 10px 15px; text-decoration: none; color: #333;">Pengaturan</a>
            <a href="riwayatpembelian.html" style="display: block; padding: 10px 15px; text-decoration: none; color: #333;">Riwayat</a>
            <hr style="margin: 0; border: none; border-top: 1px solid #eee;">
            <a href="#" onclick="logout()" style="display: block; padding: 10px 15px; text-decoration: none; color: #333;">Logout</a>
          </div>
        </div>
      `;
      loginBtn.onclick = null; // Hapus onclick lama
    }
  }

  // Fungsi untuk toggle profile menu
  function toggleProfile() {
    const menu = document.getElementById('profileMenu');
    if (menu) {
      menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
    }
  }

  // Fungsi logout
  function logout() {
    localStorage.removeItem('isLoggedIn');
    localStorage.removeItem('userEmail');
    window.location.href = 'login.html';
  }

  // Fungsi untuk redirect ke login
  function goToLogin() {
    window.location.href = 'login.html';
  }

  // Fungsi untuk proteksi halaman yang memerlukan login
  function requireLogin() {
    if (!checkLoginStatus()) {
      alert('Anda harus login terlebih dahulu');
      window.location.href = 'login.html';
      return false;
    }
    return true;
  }

  // Jalankan saat halaman dimuat
  document.addEventListener('DOMContentLoaded', function() {
    updateNavbar();
    
    // Close profile menu when clicking outside
    document.addEventListener('click', function(event) {
      const menu = document.getElementById('profileMenu');
      const profileBtn = document.querySelector('.profile-btn');
      
      if (menu && profileBtn && !profileBtn.contains(event.target)) {
        menu.style.display = 'none';
      }
    });
  });
</script>

<!-- Script Modal yang sudah dimodifikasi -->
<script>
  // Fungsi modal
  function showModal() {
    // Cek apakah sudah login
    if (checkLoginStatus()) {
      // Jika sudah login, langsung ke booking
      window.location.href = "booking.html";
    } else {
      // Jika belum login, tampilkan modal
      document.getElementById('loginModal').style.display = 'block';
    }
  }

  function closeModal() {
    document.getElementById('loginModal').style.display = 'none';
  }

  function handleLogin() {
    // Simpan URL tujuan setelah login
    localStorage.setItem('redirectAfterLogin', 'booking.html');
    window.location.href = "login.html";
  }

  function handleRegister() {
    // Simpan URL tujuan setelah register
    localStorage.setItem('redirectAfterLogin', 'booking.html');
    window.location.href = "register.html";
  }

  // Close modal when clicking outside
  window.onclick = function(event) {
    const modal = document.getElementById('loginModal');
    if (event.target === modal) {
      closeModal();
    }
  }
</script>


</body>
</html>




